#!/usr/bin/env ruby

if ARGV.size != 2
  $stderr.puts "Usage camerasink <source> <outputdir>"
  exit 2
end

ENV['RAILS_ENV'] ||= 'production'
# Load the Rails application.
require File.expand_path('../config/application', File.dirname(__FILE__))
Camerasink::BASEDIR = ARGV[1]
Camerasink::Application.initialize!

camera = Camera.new
camera.name = "test"
camera.source = ARGV[0]
camera.basedir = ARGV[1]
camera.save!
camera.run
